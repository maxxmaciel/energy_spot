import { Box, Button, Checkbox, FormControlLabel, FormGroup, Modal, TextField, Typography } from "@mui/material";
import { useState } from "react";
import { modalStyle } from "../ArquivoStyle";
import CloseButton from "./CloseButton";
import { UseModalsReturn } from "./useModals";

interface IScheduleModal {
    open: boolean;
    InstanceUseModals: UseModalsReturn;
}

const ScheduleModal = ({ open, InstanceUseModals }: IScheduleModal) => {
    const { styleGlobalModal, handleScheduleConfirm , ConfigurationModalState} = InstanceUseModals;
    
    const { currentConfigIndex, mediaConfig, screenConfigs, openZoneFilesModal } = ConfigurationModalState;
    const handleCreateSchedule = () => {
        handleScheduleConfirm();
    };

    const [weekDays, setWeekDays] = useState({
        domingo: true,
        segunda: true,
        terca: true,
        quarta: true,
        quinta: true,
        sexta: true,
        sabado: true
    });

    const handleCheckboxChange = (event: React.ChangeEvent<HTMLInputElement>) => {
        setWeekDays({ ...weekDays, [event.target.name]: event.target.checked });
    };
    const currentConfig = screenConfigs[currentConfigIndex];
    return (
        <Modal
            open={open}
            aria-labelledby="configuration-modal-title"
            aria-describedby="configuration-modal-description"
            BackdropProps={{
                onClick: (e) => e.stopPropagation()
            }}
        >
  
            <Box sx={{ ...modalStyle, width: '60%', maxWidth: '800px', padding: 4, bgcolor: 'background.paper' }} style={styleGlobalModal}>
            <CloseButton  InstanceUseModals={InstanceUseModals} />

                <Typography variant="h6" id="configuration-modal-title" gutterBottom>
                    Configuração de Schedule
                </Typography>
                <Typography variant="body1" id="configuration-modal-description" gutterBottom>
                Configure os dias da semana e horários para o perfil de {currentConfig?.TotalTelas} Tela(s). Selecione os dias desejados e defina os horários de início e término para cada dia.
                </Typography>
                <FormGroup sx={{ marginBottom: 2 }}>
                    <Typography variant="subtitle1" gutterBottom>Dias da Semana</Typography>
                    <Box sx={{ display: 'flex', justifyContent: 'space-between', flexWrap: 'wrap' }}>
                        <FormControlLabel
                            control={<Checkbox checked={weekDays.domingo} onChange={handleCheckboxChange} name="domingo" />}
                            label="Dom"
                        />
                        <FormControlLabel
                            control={<Checkbox checked={weekDays.segunda} onChange={handleCheckboxChange} name="segunda" />}
                            label="Seg"
                        />
                        <FormControlLabel
                            control={<Checkbox checked={weekDays.terca} onChange={handleCheckboxChange} name="terca" />}
                            label="Ter"
                        />
                        <FormControlLabel
                            control={<Checkbox checked={weekDays.quarta} onChange={handleCheckboxChange} name="quarta" />}
                            label="Qua"
                        />
                        <FormControlLabel
                            control={<Checkbox checked={weekDays.quinta} onChange={handleCheckboxChange} name="quinta" />}
                            label="Qui"
                        />
                        <FormControlLabel
                            control={<Checkbox checked={weekDays.sexta} onChange={handleCheckboxChange} name="sexta" />}
                            label="Sex"
                        />
                        <FormControlLabel
                            control={<Checkbox checked={weekDays.sabado} onChange={handleCheckboxChange} name="sabado" />}
                            label="Sáb"
                        />
                    </Box>
                </FormGroup>
                <FormGroup sx={{ marginBottom: 2 }}>
                    <Typography variant="subtitle1" gutterBottom>Horários</Typography>
                    <Box sx={{ display: 'flex', justifyContent: 'space-between' }}>
                        <TextField type="time" name="inicio" label="Início" defaultValue="00:00" InputLabelProps={{ shrink: true  }} />
                        <TextField type="time" name="fim" label="Fim" defaultValue="23:59" InputLabelProps={{ shrink: true }} />
                    </Box>
                </FormGroup>
                <FormGroup sx={{ marginBottom: 2 }}>
                    <Typography variant="subtitle1" gutterBottom>Prioridade</Typography>
                    <Box sx={{ display: 'flex', flexDirection: 'column' }}>
                        <FormControlLabel control={<Checkbox name="passoPrioritario" />} label="Passo Prioritário" />
                        <FormControlLabel control={<Checkbox name="ignorarPrioritarios" />} label="Ignorar Prioritários" />
                        <FormControlLabel control={<Checkbox name="ignorarMesmoGrupo" />} label="Ignorar Mesmo Grupo" />
                        <FormControlLabel control={<Checkbox name="passoTemporal" />} label="Passo Temporal" />
                        <FormControlLabel control={<Checkbox name="ignorarTemporais" />} label="Ignorar Temporais" />
                    </Box>
                    <Box sx={{ display: 'flex', justifyContent: 'space-between', marginTop: 2 }}>
                        <TextField type="number" name="intervaloPassos" label="Intervalo Passos" defaultValue="0" InputLabelProps={{ shrink: true }} />
                        <TextField type="number" name="intervaloTempo" label="Intervalo Tempo" defaultValue="0" InputLabelProps={{ shrink: true }} />
                    </Box>
                </FormGroup>
                <Button
                    onClick={handleCreateSchedule}
                    color="primary"
                    variant="contained"
                    sx={{ marginTop: '20px' }}
                  
                >
                    Confirmar Schedule
                </Button>
            </Box>
        </Modal>
    );
};

export default ScheduleModal;
